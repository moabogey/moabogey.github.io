<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
	<title>Test</title>
<!-- Markdown CSS --->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.css">
<!-- Highlight CSS --->
<style type="text/css">
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8;
}

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold;
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080;
}

.hljs-string,
.hljs-doctag {
  color: #d14;
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold;
}

.hljs-subst {
  font-weight: normal;
}

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold;
}

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal;
}

.hljs-regexp,
.hljs-link {
  color: #009926;
}

.hljs-symbol,
.hljs-bullet {
  color: #990073;
}

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3;
}

.hljs-meta {
  color: #999;
  font-weight: bold;
}

.hljs-deletion {
  background: #fdd;
}

.hljs-addition {
  background: #dfd;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style>
<!-- Load mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
<!-- End of mathjax configuration -->
</head>
<body>

<article id="markdown" class="markdown-body"><h2 id="bts">BTS ì•„ë¯¸ íŠ¸ìœ— ğŸ¤–</h2>
<p>ë°©íƒ„ì†Œë…„ë‹¨ ì•„ë¯¸ì˜ íŠ¸ìœ—ì„ ëª¨ì•„ì£¼ëŠ” ë´‡ì…ë‹ˆë‹¤.</p>
<ul>
<li>
<p>ê°œë°œì: skettee</p>
</li>
<li>
<p>ê¹ƒí—ˆë¸Œ ì£¼ì†Œ: <a href="https://github.com/skettee/bts_army_on_twitter">https://github.com/skettee/bts_army_on_twitter</a></p>
</li>
</ul>
<h3 id="">ê°œë°œ í™˜ê²½ ë§Œë“¤ê¸°</h3>
<p>ë´‡ì„ ê°œë°œí•˜ê¸° ìœ„í•´ì„œëŠ” ëª‡ê°€ì§€ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì„¤ì¹˜í•˜ê³  í™˜ê²½ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.
<a href="https://github.com/moabogey/docs/wiki/%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD%EB%A7%8C%EB%93%A4%EA%B8%B0">ê°œë°œ í™˜ê²½ ë§Œë“¤ê¸°</a>ë¥¼ ì°¸ì¡° í•˜ì„¸ìš”.</p>
<h3 id="">ì½”ë“œ ì‹¤í–‰</h3>
<ul>
<li>
<p>í„°ë¯¸ë„ ì‹¤í–‰</p>
<ol>
<li>ğŸ–¼  Windows PowerShellì„ ì‹¤í–‰í•œë‹¤.</li>
<li>ğŸ Terminalì„ ì‹¤í–‰í•œë‹¤.</li>
</ol>
</li>
<li>
<p>ì‘ì—…í•  í´ë”ë¥¼ ìƒì„±í•œë‹¤.</p>
</li>
</ul>
<pre><code>mkdir MyWork
</code></pre>
<ul>
<li>ì‘ì—…í•  í´ë”ë¡œ ì´ë™í•œë‹¤.</li>
</ul>
<pre><code>cd MyWork
</code></pre>
<ul>
<li>ê¹ƒ í´ë¡  (Git Clone)ì„ ìˆ˜í–‰í•œë‹¤.</li>
</ul>
<pre><code>git clone https://github.com/skettee/bts_army_on_twitter.git
</code></pre>
<ul>
<li>ë³µì‚¬í•œ ì½”ë“œì˜ í´ë”ë¡œ ì´ë™í•œë‹¤.</li>
</ul>
<pre><code>cd bts_army_on_twitter
</code></pre>
<ul>
<li>VSCodeë¥¼ ì‹¤í–‰í•œë‹¤.</li>
</ul>
<pre><code>code .
</code></pre>
<ul>
<li>
<p>ì™¼ìª½ EXPLOREì—ì„œ <code>bas_army_on_twitter.py</code>ë¥¼ ì„ íƒí•œë‹¤.</p>
</li>
<li>
<p>í•˜ë‹¨ ë°”ì— <code>Python3.7.3 64-bit('base':conda)</code>ë¥¼ ëˆ„ë¥¸ë‹¤.</p>
</li>
<li>
<p><code>Python 3.6.8 64-bit ('moabogey':conda)</code>ë¥¼ ì„ íƒí•œë‹¤.</p>
</li>
<li>
<p>ì†ŒìŠ¤ ì½”ë“œì— RunCell | Run Belowì—ì„œ <code>Run Below</code>ë¥¼ ëˆ„ë¥¸ë‹¤.</p>
</li>
<li>
<p>ë°ì´í„°ê°€ ì •ìƒì ìœ¼ë¡œ ìˆ˜ì§‘ì´ ë˜ëŠ”ì§€ ì˜¤ë¥¸ìª½ Python Interactiveì—ì„œ í™•ì¸í•œë‹¤.</p>
</li>
</ul>
<h3 id="">ì½”ë“œ ë¶„ì„</h3>
<p>bts_army_on_twitter.pyë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.
ë´‡ì˜ ì†ŒìŠ¤ ì½”ë“œëŠ” í¬ê²Œ ì„¸ë‹¨ê³„ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<ol>
<li>
<p>ì‚¬ì´íŠ¸ì˜ HTMLì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘</p>
</li>
<li>
<p>í¬ìŠ¤íŠ¸ì˜ HTMLì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘</p>
</li>
<li>
<p>ë°ì´í„° ì €ì¥</p>
</li>
</ol>
<p><strong>ì‚¬ì´íŠ¸ì˜ HTMLì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘</strong></p>
<ul>
<li>
<p>ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•  ì‚¬ì´íŠ¸ì˜ ì •ë³´ì™€ ì£¼ì†Œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œëŠ” <a href="https://twitter.com/BTS_ARMY">https://twitter.com/BTS_ARMY</a> ì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.</p>
</li>
<li>
<p>requestsì™€ beautifulsoup4ë¥¼ ì´ìš©í•´ì„œ ì‚¬ì´íŠ¸ì˜ HTMLì„ ê°€ì ¸ì˜¤ê³  íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.</p>
</li>
<li>
<p>ì €ì¥ëœ HTMLíŒŒì¼ (twitter_source.html)ì„ ì—´ì–´ ë´…ë‹ˆë‹¤. ì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” "í¬ìŠ¤íŠ¸ì˜ ë¦¬ìŠ¤íŠ¸"ë¥¼ í‘œí˜„í•˜ëŠ” êµ¬ê°„ì„ ì°¾ì„ ê²ƒì…ë‹ˆë‹¤. <strong>í¬ìŠ¤íŠ¸</strong>ëŠ” ì œëª©, ë‚´ìš©, ì´ë¯¸ì§€, ì‘ì„±ì, ì‘ì„± ë‚ ì§œ ë° í˜ì´ì§€ ìœ„ì¹˜(URL)ë¥¼ ê°€ì§€ê³  ìˆëŠ” í•˜ë‚˜ì˜ ë¬¸ì„œ(ì—¬ê¸°ì„œëŠ” íŠ¸ìœ—)ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìš©ì–´ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
</li>
</ul>
<pre><code>+-------------+  +--&gt;   &lt;div class="content"&gt;
|   Post 1
|  (Tweet 1)
+-------------+  +--&gt;   &lt;/div&gt;

+-------------+  +--&gt;   &lt;div class="content"&gt;
|   Post 2
|  (Tweet 2)
+-------------+  +--&gt;   &lt;/div&gt;

+-------------+  +--&gt;  &lt;div class="content"&gt;
|   Post3
|  (Tweet 3)
+-------------+  +--&gt;   &lt;/div&gt;
</code></pre>
<ul>
<li>
<p>ê°ê°ì˜ í¬ìŠ¤íŠ¸ëŠ” <code>&lt;div class="content"&gt;</code> ì—ì„œ ì‹œì‘ ë˜ê³  <code>&lt;/div&gt;</code>ë¡œ ëë‚œë‹¤ëŠ” ê²ƒì„ ì•Œì•„ë‚´ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì´ê²ƒì€ ì‚¬ì´íŠ¸ë§ˆë‹¤ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì´ê²ƒì„ ì°¾ì•„ë‚´ëŠ” ê²ƒì€ ì•½ê°„ì˜ ê²½í—˜ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
</li>
<li>
<p>ë°œê²¬í•œ í¬ìŠ¤íŠ¸ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±ì, ì˜¬ë¦° ì‹œê°„ ë° í¬ìŠ¤íŠ¸ ìœ„ì¹˜(URL)ì„ ì°¾ìŠµë‹ˆë‹¤.</p>
</li>
</ul>
<pre><code>+-------------+
|   Post 1
+-------------+
|  createdBy  +--&gt;  &lt;strong class="fullname...&gt; &lt;/strong&gt;
|
|  post URL   +--&gt;  &lt;a class="tweet-timestamp... href=...&gt;
|
|  createdAt  +--&gt;  &lt;a class="tweet-timestamp... title=...&gt;
|
+-------------+
</code></pre>
<ul>
<li>ë‚˜ë¨¸ì§€ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ì„œ í¬ìŠ¤íŠ¸ HTMLë¡œ ì´ë™í•©ë‹ˆë‹¤.</li>
</ul>
<p><strong>í¬ìŠ¤íŠ¸ì˜ HTMLì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘</strong></p>
<ul>
<li>
<p>ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•  í¬ìŠ¤íŠ¸ì˜ ì£¼ì†Œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</p>
</li>
<li>
<p>requestsì™€ beautifulsoup4ë¥¼ ì´ìš©í•´ì„œ ì‚¬ì´íŠ¸ì˜ HTMLì„ ê°€ì ¸ì˜¤ê³  íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.</p>
</li>
<li>
<p>ì €ì¥ëœ HTMLíŒŒì¼ (twitter_post_source.html)ì„ ì—´ì–´ ë´…ë‹ˆë‹¤. ì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” í¬ìŠ¤íŠ¸ì˜ ì œëª©, ìš”ì•½, ì´ë¯¸ì§€, ì‚¬ì´íŠ¸ ì´ë¦„, í¬ìŠ¤íŠ¸ ì£¼ì†Œ(URL), ìˆ˜ì§‘ ë‚ ì§œ ë° ì‹œê°„ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•  ê²ƒì…ë‹ˆë‹¤.</p>
</li>
</ul>
<p><strong>Open Graph Protocol</strong></p>
<ul>
<li>
<p>ëŒ€ë¶€ë¶„ì˜ ì‚¬ì´íŠ¸ë“¤ì€ ìš°ë¦¬ê°€ ìˆ˜ì§‘í•  ë°ì´í„°ë¥¼ ì‚¬ì´íŠ¸ì˜ ì²«ë¨¸ë¦¬ì— ë¯¸ë¦¬ ëª¨ì•„ ë†“ê³  ìˆìŠµë‹ˆë‹¤. ì´ ê·œì•½(Protocol)ì€ ì‚¬ì´íŠ¸ë¥¼ ëª¨ë‘ ë¶„ì„í•˜ì§€ ì•Šê³ ë„ ì‚¬ì´íŠ¸ì˜ ë‚´ìš©ì„ íŒŒì•…í•˜ëŠ”ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.</p>
</li>
<li>
<p>ì•„ë˜ì™€ ê°™ì€ ë©”íƒ€ íƒœê·¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
</li>
</ul>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
...
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"..."</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:url"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"..."</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:title"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"..."</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:image"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"..."</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:description"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"..."</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:site_name"</span>/&gt;</span>
...
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
</code></pre>
<ul>
<li>ë©”íƒ€ íƒœê·¸ì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.</li>
</ul>
<p><strong>ë°ì´í„° ì €ì¥</strong></p>
<ul>
<li>ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ì„ ë³„í•´ì„œ ì¤‘ë³µë˜ëŠ” ê²ƒì„ ì œì™¸í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•©ë‹ˆë‹¤. ëª¨ì•„ë³´ê¸° ë´‡ì€ í•˜ë£¨ì— 24ë²ˆ ì´ìƒ ë™ì‘ í•˜ë„ë¡ ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— í•œë²ˆì— ëª¨ë“  ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì§€ ì•Šê³  ê°€ì¥ ìµœê·¼ì˜ ë°ì´í„° 1~2ê°œë¥¼ ìˆ˜ì§‘í•˜ëŠ” ê²ƒì´ ì›ì¹™ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•œ ë‚ ì§œì™€ ë™ì¼í•œ ë‚ ì— ë“±ë¡ëœ í¬ìŠ¤íŠ¸ë§Œ ìˆ˜ì§‘í•˜ë„ë¡ í”„ë¡œê·¸ë˜ë°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<h3 id="">ì°¸ê³  ì‚¬ì´íŠ¸</h3>
<ul>
<li>
<p><a href="https://github.com/moabogey/docs/wiki/%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD%EB%A7%8C%EB%93%A4%EA%B8%B0">ê°œë°œ í™˜ê²½ ë§Œë“¤ê¸°</a></p>
</li>
<li>
<p><a href="https://github.com/moabogey/docs/wiki/%EC%98%88%EC%A0%9C%EC%BD%94%EB%93%9C%EC%8B%A4%ED%96%89">ì˜ˆì œ ì½”ë“œ ì‹¤í–‰</a></p>
</li>
<li>
<p><a href="https://github.com/moabogey/docs/wiki/%EC%BD%94%EB%94%A9%ED%95%98%EA%B8%B0%EC%A0%84%EC%97%90">ì½”ë”©ì„ í•˜ê¸° ì „ì—</a></p>
</li>
<li>
<p><a href="https://github.com/moabogey/docs/wiki/%EC%98%88%EC%A0%9C%EC%BD%94%EB%93%9C%EB%B6%84%EC%84%9D">ì˜ˆì œ ì½”ë“œ ë¶„ì„</a></p>
</li>
<li>
<p><a href="https://github.com/moabogey/docs/wiki/%EB%B4%87%EA%B0%9C%EB%B0%9C%ED%95%98%EA%B8%B0">ë´‡ ê°œë°œ í•˜ê¸°</a></p>
</li>
</ul>
<pre><code class="language-python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> requests.exceptions <span class="hljs-keyword">import</span> HTTPError
<span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> timedelta

<span class="hljs-keyword">if</span> __debug__:
    <span class="hljs-keyword">import</span> os.path

<span class="hljs-comment"># ëª¨ì•„ë³´ê¸° ì»´í¬ë„ŒíŠ¸ë¥¼ ê°€ì ¸ì˜¨ë‹¤.</span>
<span class="hljs-keyword">import</span> moabogey_database <span class="hljs-keyword">as</span> moabogey
<span class="hljs-keyword">from</span> moabogey_id <span class="hljs-keyword">import</span> *

<span class="hljs-comment"># ì‚¬ì´íŠ¸ ì´ë¦„</span>
site_name = <span class="hljs-string">'twitter'</span>
<span class="hljs-comment"># ì‚¬ì´íŠ¸ì—ì„œ ê°€ì ¸ì˜¬ ì£¼ì œ</span>
subject_name = <span class="hljs-string">'BTS_ARMY'</span>
<span class="hljs-comment"># ì‚¬ì´íŠ¸ ì£¼ì†Œ</span>
site_url = <span class="hljs-string">'https://twitter.com/BTS_ARMY'</span>
<span class="hljs-keyword">if</span> __debug__:
    print(<span class="hljs-string">'ğŸ¤Ÿ{}ğŸ¤Ÿ ë°ì´í„° ìˆ˜ì§‘ ì¤‘... âš™ï¸'</span>.format(site_url))

<span class="hljs-comment"># ì‚¬ì´íŠ¸ì˜ HTMLì„ ê°€ì ¸ì˜¨ë‹¤.</span>
<span class="hljs-keyword">try</span>:
    response = requests.get(site_url)
    <span class="hljs-comment"># ì—ëŸ¬ê°€ ë°œìƒ í–ˆì„ ê²½ìš° ì—ëŸ¬ ë‚´ìš©ì„ ì¶œë ¥í•˜ê³  ì¢…ë£Œí•œë‹¤.</span>
    response.raise_for_status()
<span class="hljs-keyword">except</span> HTTPError <span class="hljs-keyword">as</span> http_err:
    print(f<span class="hljs-string">'HTTP error occurred: {http_err}'</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> err:
    print(f<span class="hljs-string">'Other error occurred: {err}'</span>)
<span class="hljs-keyword">else</span>:
    html_source = response.text
    
    <span class="hljs-comment"># BeautifulSoup ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•œë‹¤.</span>
    soup = BeautifulSoup(html_source, <span class="hljs-string">'html.parser'</span>)
    
    <span class="hljs-comment"># HTMLì„ ë¶„ì„í•˜ê¸° ìœ„í•´ì„œ í˜ì´ì§€ì˜ ì†ŒìŠ¤ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•œë‹¤.</span>
    <span class="hljs-keyword">if</span> __debug__:
        file_name = site_name + <span class="hljs-string">'_source.html'</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.isfile(file_name):
            print(<span class="hljs-string">'file save: '</span>, file_name)
            <span class="hljs-keyword">with</span> open(file_name, <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
                f.write(soup.prettify())
       
    <span class="hljs-comment"># ë°ì´í„°ë¥¼ ì €ì¥í•  ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤. </span>
    <span class="hljs-comment"># bot_idëŠ” moabogey_idì—ì„œ ê°€ì ¸ì˜¨ ê°’ì´ë‹¤.</span>
    db_name = subject_name + <span class="hljs-string">'_on_'</span> + site_name 
    my_db = moabogey.Dbase(db_name, bot_id)
            
    <span class="hljs-comment"># ë°˜ë³µí•´ì„œ í¬ìŠ¤íŠ¸ì˜ ëª©ë¡ì„ í•˜ë‚˜ì”© ê²€ìƒ‰í•˜ë©° ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•œë‹¤.</span>
    <span class="hljs-keyword">for</span> post <span class="hljs-keyword">in</span> soup.find_all(<span class="hljs-string">'div'</span>, class_=<span class="hljs-string">'content'</span>):
        <span class="hljs-comment"># í¬ìŠ¤íŠ¸ë¥¼ ì˜¬ë¦° ì‘ì„±ìë¥¼ ìˆ˜ì§‘í•œë‹¤.</span>
        moa_createBy = post.find(<span class="hljs-string">'strong'</span>, class_=<span class="hljs-string">'fullname'</span>).text.strip()
        <span class="hljs-comment">#print('createdBy: ', moa_createBy)</span>

        <span class="hljs-comment"># í¬ìŠ¤íŠ¸ì˜ ì£¼ì†Œë¥¼ ìˆ˜ì§‘í•œë‹¤.</span>
        href = post.find(<span class="hljs-string">'a'</span>, {<span class="hljs-string">"class"</span>: <span class="hljs-string">"tweet-timestamp"</span>, <span class="hljs-string">"href"</span>: <span class="hljs-keyword">True</span>})
        <span class="hljs-keyword">if</span> href:
            href = href[<span class="hljs-string">'href'</span>] 
            href_url = <span class="hljs-string">'https://twitter.com'</span> + href
            <span class="hljs-comment">#print('href: ', href_url)</span>

            <span class="hljs-comment"># í¬ìŠ¤íŠ¸ë¥¼ ì˜¬ë¦° ë‚ ì§œë¥¼ ìˆ˜ì§‘í•œë‹¤.</span>
            <span class="hljs-keyword">if</span> __debug__:
                <span class="hljs-comment"># LANGUAGE KOREA CASE</span>
                post_time = post.find(<span class="hljs-string">'a'</span>, class_=<span class="hljs-string">"tweet-timestamp"</span>)[<span class="hljs-string">'title'</span>].replace(<span class="hljs-string">'ì˜¤ì „'</span>, <span class="hljs-string">'AM'</span>).replace(<span class="hljs-string">'ì˜¤í›„'</span>, <span class="hljs-string">'PM'</span>)
                <span class="hljs-comment"># ì‹œê°„ í˜•ì‹ - AM 2:27 - 2019ë…„ 3ì›” 11ì¼</span>
                moa_createdAt = datetime.strptime(post_time, <span class="hljs-string">'%p %I:%M - %Yë…„ %mì›” %dì¼'</span>)
            <span class="hljs-keyword">else</span>:
                <span class="hljs-comment"># LANGUAGE UNDEFINED CASE</span>
                post_time = post.find(<span class="hljs-string">'a'</span>, class_=<span class="hljs-string">"tweet-timestamp"</span>)[<span class="hljs-string">'title'</span>]
                <span class="hljs-comment"># ì‹œê°„ í˜•ì‹ - 8:01 PM - 30 Mar 2019</span>
                moa_createdAt = datetime.strptime(post_time, <span class="hljs-string">'%I:%M %p - %d %b %Y'</span>)

            <span class="hljs-comment"># ì‹œê°„ì„ ë³´ì •í•œë‹¤. UTC (+7) ?</span>
            moa_createdAt = moa_createdAt + timedelta(hours=<span class="hljs-number">7</span>)

            <span class="hljs-comment"># í¬ìŠ¤íŠ¸ì˜ HTMLì„ ê°€ì ¸ì˜¨ë‹¤.</span>
            <span class="hljs-keyword">try</span>:
                response =  requests.get(href_url)
                response.raise_for_status()
            <span class="hljs-keyword">except</span> HTTPError <span class="hljs-keyword">as</span> http_err:
                print(f<span class="hljs-string">'HTTP error occurred: {http_err}'</span>)
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> err:
                print(f<span class="hljs-string">'Other error occurred: {err}'</span>)
            <span class="hljs-keyword">else</span>:
                subhtml_source = response.text
                <span class="hljs-comment"># BeautifulSoup ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•œë‹¤.</span>
                post = BeautifulSoup(subhtml_source, <span class="hljs-string">'html.parser'</span>)

                <span class="hljs-comment"># HTMLì„ ë¶„ì„í•˜ê¸° ìœ„í•´ì„œ í¬ìŠ¤íŠ¸ì˜ ì†ŒìŠ¤ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•œë‹¤.</span>
                <span class="hljs-keyword">if</span> __debug__:
                    file_name = site_name + <span class="hljs-string">'_post_source.html'</span>
                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.isfile(file_name):
                        print(<span class="hljs-string">'file save: '</span>, file_name)
                        <span class="hljs-keyword">with</span> open(file_name, <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
                            f.write(post.prettify())

                <span class="hljs-comment"># í¬ìŠ¤íŠ¸ ì œëª©ì„ ìˆ˜ì§‘/ê°€ê³µ í•œë‹¤.</span>
                <span class="hljs-comment">#moa_title = post.find('meta', property="og:title")</span>
                moa_title = post.find(<span class="hljs-string">'meta'</span>, property=<span class="hljs-string">"og:description"</span>)
                <span class="hljs-keyword">if</span> moa_title:
                    moa_title = moa_title[<span class="hljs-string">'content'</span>].splitlines()[<span class="hljs-number">0</span>]
                
                <span class="hljs-comment"># í¬ìŠ¤íŠ¸ ìš”ì•½ì„ ìˆ˜ì§‘/ê°€ê³µí•œë‹¤.</span>
                moa_desc = post.find(<span class="hljs-string">'meta'</span>, property=<span class="hljs-string">"og:description"</span>)
                <span class="hljs-keyword">if</span> moa_desc:
                    moa_desc = <span class="hljs-string">''</span>.join(moa_desc[<span class="hljs-string">'content'</span>].splitlines()[<span class="hljs-number">1</span>:])
                
                <span class="hljs-comment"># ëŒ€í‘œ ì´ë¯¸ì§€ì˜ ì£¼ì†Œë¥¼ ìˆ˜ì§‘í•œë‹¤.</span>
                moa_image = post.find(<span class="hljs-string">'meta'</span>, property=<span class="hljs-string">"og:image"</span>)
                <span class="hljs-keyword">if</span> moa_image:
                    moa_image = moa_image[<span class="hljs-string">'content'</span>]
                
                <span class="hljs-comment"># ì‚¬ì´íŠ¸ ì´ë¦„ì„ ìˆ˜ì§‘í•œë‹¤.</span>
                moa_site_name = post.find(<span class="hljs-string">'meta'</span>, property=<span class="hljs-string">"og:site_name"</span>)
                <span class="hljs-keyword">if</span> moa_site_name:
                    moa_site_name = moa_site_name[<span class="hljs-string">'content'</span>]
                
                <span class="hljs-comment"># í¬ìŠ¤íŠ¸ì˜ ì£¼ì†Œë¥¼ ìˆ˜ì§‘í•œë‹¤.</span>
                moa_url = href_url
                
                <span class="hljs-comment"># í˜„ì¬ ë‚ ì§œì™€ ì‹œê°„ì„ ìˆ˜ì§‘í•œë‹¤.</span>
                moa_timeStamp = datetime.now()

                <span class="hljs-comment"># ì˜¤ëŠ˜ ë°œí–‰ëœ í¬ìŠ¤íŠ¸ë§Œ ì„ íƒí•œë‹¤.</span>
                delta = moa_timeStamp - moa_createdAt + timedelta(hours=<span class="hljs-number">9</span>)
                <span class="hljs-keyword">if</span> delta.days &lt;=<span class="hljs-number">0</span>:
                
                    <span class="hljs-comment"># ë°ì´í„°ë² ì´ìŠ¤ì— ìˆëŠ” í¬ìŠ¤íŠ¸ì™€ ì¤‘ë³µë˜ëŠ”ì§€ë¥¼ í™•ì¸í•œë‹¤.</span>
                    <span class="hljs-keyword">if</span> my_db.isNewItem(<span class="hljs-string">'title'</span>, moa_title):
                        <span class="hljs-comment"># ë°ì´í„° íƒ€ì…ì„ í™•ì¸í•œë‹¤.</span>
                        <span class="hljs-keyword">assert</span> type(moa_title) == str, <span class="hljs-string">'title: type error'</span>
                        <span class="hljs-keyword">assert</span> type(moa_desc) == str, <span class="hljs-string">'desc: type error'</span>
                        <span class="hljs-keyword">assert</span> type(moa_url) == str, <span class="hljs-string">'url: type error'</span>
                        <span class="hljs-keyword">assert</span> type(moa_image) == str, <span class="hljs-string">'image: type error'</span>
                        <span class="hljs-keyword">assert</span> type(moa_site_name) == str, <span class="hljs-string">'siteName: type error'</span>
                        <span class="hljs-keyword">assert</span> type(moa_createBy) == str, <span class="hljs-string">'createBy: type error'</span>
                        <span class="hljs-keyword">assert</span> type(moa_createdAt) == datetime, <span class="hljs-string">'createdAt: type error'</span>
                        <span class="hljs-keyword">assert</span> type(moa_timeStamp) == datetime, <span class="hljs-string">'timeStamp: type error'</span>
                        
                        <span class="hljs-comment"># JSONí˜•ì‹ìœ¼ë¡œ ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ë³€í™˜í•œë‹¤.</span>
                        db_data = { <span class="hljs-string">'title'</span>: moa_title, 
                            <span class="hljs-string">'desc'</span>: moa_desc,
                            <span class="hljs-string">'url'</span>: moa_url,
                            <span class="hljs-string">'image'</span>: moa_image,
                            <span class="hljs-string">'siteName'</span>: moa_site_name,
                            <span class="hljs-string">'createdBy'</span>: moa_createBy,
                            <span class="hljs-string">'createdAt'</span>: moa_createdAt,
                            <span class="hljs-string">'timeStamp'</span>: moa_timeStamp
                        }

                        <span class="hljs-keyword">if</span> __debug__:
                            <span class="hljs-comment"># ë””ë²„ê·¸ë¥¼ ìœ„í•´ì„œ ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ì¶œë ¥í•œë‹¤.</span>
                            temp_data = db_data.copy()
                            temp_data[<span class="hljs-string">'desc'</span>] = temp_data[<span class="hljs-string">'desc'</span>][:<span class="hljs-number">20</span>] + <span class="hljs-string">'...'</span>
                            print(<span class="hljs-string">'ğŸ“€ ìˆ˜ì§‘í•œ json data: '</span>)
                            print(json.dumps(temp_data, indent=<span class="hljs-number">4</span>, ensure_ascii=<span class="hljs-keyword">False</span>, default=str))

                        <span class="hljs-comment"># ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì „ì†¡í•œë‹¤.</span>
                        my_db.insertTable(db_data)

    <span class="hljs-comment"># ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ë””ìŠ¤í”Œë ˆì´ í•œë‹¤.</span>
    <span class="hljs-keyword">if</span> __debug__:
        my_db.displayHTML()

    <span class="hljs-comment"># ë°ì´í„° ë² ì´ìŠ¤ë¥¼ ë‹«ëŠ”ë‹¤.</span>
    my_db.close()
    

</code></pre>
<pre><code>ğŸ¤Ÿhttps://twitter.com/BTS_ARMYğŸ¤Ÿ ë°ì´í„° ìˆ˜ì§‘ ì¤‘... âš™ï¸
</code></pre>
<style>
  .card {
    width: 340px;
    padding-bottom: 20px;
    border: 1px solid #DDDDDD;
    border-radius: 4px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }
  .center {
    display: block;
    width: 100%;
    margin-left: auto;
    margin-right: auto;
  }
  .card_item {
    width: 340px;
    padding: 5px 10px;
  }
  hr { 
    display: flex;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
    margin-left: auto;
    margin-right: 100px;
    border-style: inset;
    border-width: 1px;
  } 
  h5 {
  	color: blue;
  }
</style>
<div class="card">
  <img src="https://pbs.twimg.com/media/D6cvGkNV4AA13zz.jpg" alt="Image" class="center">
  <div class="card_item">
    <h5>Twitter</h5>
    <h4><b>â€œTHIS WEDNESDAY: #BTSonGMA</b></h4> 
    <hr>
    <p> By Good Morning America </p>
  </div>
</div>
<style>
  .card {
    width: 340px;
    padding-bottom: 20px;
    border: 1px solid #DDDDDD;
    border-radius: 4px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }
  .center {
    display: block;
    width: 100%;
    margin-left: auto;
    margin-right: auto;
  }
  .card_item {
    width: 340px;
    padding: 5px 10px;
  }
  hr { 
    display: flex;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
    margin-left: auto;
    margin-right: 100px;
    border-style: inset;
    border-width: 1px;
  } 
  h5 {
  	color: blue;
  }
</style>
<div class="card">
  <img src="https://pbs.twimg.com/profile_images/880498772505223168/eUC2vSd0_400x400.jpg" alt="Image" class="center">
  <div class="card_item">
    <h5>Twitter</h5>
    <h4><b>â€œItâ€™s impossible to not catch @BTS_twt fever. https://t.co/Qga3UmEeSiâ€</b></h4> 
    <hr>
    <p> By Chicago Reader </p>
  </div>
</div>
<style>
  .card {
    width: 340px;
    padding-bottom: 20px;
    border: 1px solid #DDDDDD;
    border-radius: 4px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }
  .center {
    display: block;
    width: 100%;
    margin-left: auto;
    margin-right: auto;
  }
  .card_item {
    width: 340px;
    padding: 5px 10px;
  }
  hr { 
    display: flex;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
    margin-left: auto;
    margin-right: 100px;
    border-style: inset;
    border-width: 1px;
  } 
  h5 {
  	color: blue;
  }
</style>
<div class="card">
  <img src="https://pbs.twimg.com/media/D6c0-r6UIAIJ6C5.jpg:large" alt="Image" class="center">
  <div class="card_item">
    <h5>Twitter</h5>
    <h4><b>â€œThank you, Chicago! </b></h4> 
    <hr>
    <p> By BTS A.R.M.Y </p>
  </div>
</div>
</article>

</body>
</html>